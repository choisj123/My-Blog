(()=>{var e={};e.id=246,e.ids=[246],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},50277:()=>{},72329:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c}),s(92e3),s(71796),s(90996);var r=s(30170),a=s(45002),i=s(83876),n=s.n(i),o=s(66299),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let c=["",{children:["post",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,92e3)),"/Users/sujinchoi/workspace/MyBlog/my-blog/app/post/[id]/page.js"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,71796)),"/Users/sujinchoi/workspace/MyBlog/my-blog/app/layout.js"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,90996,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/Users/sujinchoi/workspace/MyBlog/my-blog/app/post/[id]/page.js"],u="/post/[id]/page",x={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/post/[id]/page",pathname:"/post/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},16558:(e,t,s)=>{Promise.resolve().then(s.bind(s,27577))},23773:(e,t,s)=>{Promise.resolve().then(s.bind(s,29898))},95575:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,63642,23)),Promise.resolve().then(s.t.bind(s,87586,23)),Promise.resolve().then(s.t.bind(s,47838,23)),Promise.resolve().then(s.t.bind(s,58057,23)),Promise.resolve().then(s.t.bind(s,77741,23)),Promise.resolve().then(s.t.bind(s,13118,23))},27577:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var r=s(97247),a=s(72228),i=s.n(a);s(4047);var n=s(19898),o=s(34178),l=s(79906),c=s(44597);function d(){let{data:e}=(0,n.useSession)(),t=(0,o.useRouter)(),s=async()=>{await (0,n.signOut)({redirect:!1}),alert("로그아웃되었습니다."),t.push("/"),t.refresh()},a=()=>{t.push("/"),setTimeout(()=>{window.location.reload()},100)};return r.jsx("header",{className:"bg-white shadow",children:(0,r.jsxs)("div",{className:"container mx-auto py-4 px-4 sm:px-6 lg:px-8 flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:r.jsx(l.default,{href:"/",onClick:a,className:"hover:text-blue-500 transition duration-300",children:"My Blog"})}),(0,r.jsxs)("nav",{className:"space-x-6 hidden md:block",children:[r.jsx(l.default,{href:"/",onClick:a,className:"text-gray-700 hover:text-blue-500 transition duration-300",children:"Home"}),r.jsx(l.default,{href:"/board",className:"text-gray-700 hover:text-blue-500 transition duration-300",children:"Board"}),e&&r.jsx(l.default,{href:"/mypage",className:"text-gray-700 hover:text-blue-500 transition duration-300",children:"My Page"})]})]}),r.jsx("div",{className:"space-x-4 flex items-center",children:e?(0,r.jsxs)(r.Fragment,{children:[r.jsx(l.default,{href:"/mypage",className:"text-gray-700 hover:text-blue-500 transition duration-300",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[e.user.image&&r.jsx(c.default,{src:e.user.image.startsWith("http")?e.user.image:`${e.user.image}`,alt:"Profile",width:32,height:32,className:"rounded-full"}),r.jsx("span",{children:e.user.name})]})}),r.jsx("button",{onClick:s,className:"text-gray-700 hover:text-blue-500 transition duration-300",children:"Logout"})]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(l.default,{href:"/login",className:"text-gray-700 hover:text-blue-500 transition duration-300",children:"Login"}),r.jsx(l.default,{href:"/register",className:"text-gray-700 hover:text-blue-500 transition duration-300",children:"SignUp"})]})})]})})}function u({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:`${i().className} flex flex-col min-h-screen`,children:(0,r.jsxs)(n.SessionProvider,{children:[r.jsx(d,{}),r.jsx("main",{className:"container mx-auto mt-8 px-4 flex-grow",children:e}),r.jsx("footer",{className:"bg-gray-800 text-white py-4 mt-8",children:r.jsx("div",{className:"container mx-auto text-center",children:r.jsx("p",{children:"\xa9 2024 My Blog. All rights reserved."})})})]})})})}},29898:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s(97247),a=s(28964),i=s(34178),n=s(19898),o=s(10863);function l({params:e}){let[t,s]=(0,a.useState)(null),[l,c]=(0,a.useState)(""),[d,u]=(0,a.useState)(!1),[x,m]=(0,a.useState)(""),[p,h]=(0,a.useState)(""),g=(0,i.useRouter)(),{data:b}=(0,n.useSession)(),f=async()=>{try{let t=await o.Z.get(`/api/post/${e.id}`);s(t.data),m(t.data.title),h(t.data.content)}catch(e){console.error("게시글 불러오기 실패:",e)}},j=async t=>{if(t.preventDefault(),!b){alert("댓글을 작성하려면 로그인이 필요합니다.");return}if(!l){alert("댓글을 작성해주세요.");return}try{await o.Z.post("/api/comment",{content:l,post_no:parseInt(e.id)}),c(""),f()}catch(e){console.error("댓글 작성 실패:",e),alert("댓글 작성에 실패했습니다.")}},y=async()=>{if(confirm("정말로 이 게시글을 삭제하시겠습니까?"))try{await o.Z.delete(`/api/post/${e.id}`),alert("게시글이 삭제되었습니다."),g.push("/board")}catch(e){console.error("게시글 삭제 실패:",e),alert("게시글 삭제에 실패했습니다.")}},v=async e=>{e.preventDefault();try{await o.Z.put(`/api/post/${t.post_no}`,{title:x,content:p}),u(!1),f()}catch(e){console.error("게시글 수정 실패:",e),alert("게시글 수정에 실패했습니다.")}};if(!t)return r.jsx("div",{children:"로딩 중..."});let N=b?.user?.userNo===t.user_no.toString(),w=b?.user?.isAdmin;return(0,r.jsxs)("div",{className:"max-w-4xl mx-auto mt-8",children:[d?(0,r.jsxs)("form",{onSubmit:v,className:"space-y-4",children:[r.jsx("input",{type:"text",value:x,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 border rounded"}),r.jsx("textarea",{value:p,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border rounded h-40"}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[r.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 mr-2",children:"수정 완료"}),r.jsx("button",{onClick:()=>u(!1),className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:"취소"})]})]}):(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6 mb-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h1",{className:"text-3xl font-bold",children:t.title}),(N||w)&&(0,r.jsxs)("div",{className:"flex space-x-4",children:[r.jsx("button",{onClick:()=>u(!0),className:"bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600",children:"수정"}),r.jsx("button",{onClick:y,className:"bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600",children:"삭제"})]})]}),(0,r.jsxs)("p",{className:"text-gray-600 mb-4",children:["작성자: ",t.user.name," | 작성일:"," ",new Date(t.create_dt).toLocaleDateString()]}),r.jsx("div",{className:"prose mb-6",children:t.content})]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[r.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Comments"}),t.comments&&t.comments.length>0?t.comments.map(e=>(0,r.jsxs)("div",{className:"bg-gray-100 p-4 mb-4 rounded",children:[r.jsx("p",{children:e.content}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 mt-2",children:["By ",e.user.name," on"," ",new Date(e.create_dt).toLocaleDateString()]})]},e.comment_no)):r.jsx("p",{children:"아직 댓글이 없습니다."}),(0,r.jsxs)("form",{onSubmit:j,className:"mt-6",children:[r.jsx("textarea",{className:"w-full p-2 border rounded",rows:"4",placeholder:"Add a comment...",value:l,onChange:e=>c(e.target.value)}),r.jsx("button",{type:"submit",className:"mt-2 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"댓글 작성"})]})]})]})}},71796:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(45347).createProxy)(String.raw`/Users/sujinchoi/workspace/MyBlog/my-blog/app/layout.js#default`)},92e3:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(45347).createProxy)(String.raw`/Users/sujinchoi/workspace/MyBlog/my-blog/app/post/[id]/page.js#default`)},57481:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s(54564);let a=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},4047:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[379,577,564,863],()=>s(72329));module.exports=r})();